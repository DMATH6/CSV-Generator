
/*
 * NOTES
 * 
 * NEED TO CLOSE SCANNERS (Might need to re-do the scanners)
 * NEED TO ADD 'try' conditions incase it fails
 * NEED TO STOP USER FROM INPUTING ILLEGAL DATATYPES
 * WORK ON 6TH OPERATION
 * WORK ON PROMPHT OPERATIONS
 * THE FITH AND 6TH OPERATIONS WORK BUT IT ASKS FOR 1 MORE COLOMN THAN ITS SUPPOSE TO
 * (Think it might be because arrays start at 0)
 * DATA GETS CORRUPTED AT FINAL OUTPUT
 */

import java.util.ArrayList;
import java.util.Date;
import java.util.List;
import java.util.Scanner;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Scanner;
import java.io.FileReader;
import java.io.*;  
import java.lang.Object;
import java.util.Random;
import java.util.concurrent.ThreadLocalRandom;
import java.util.stream.IntStream;
public class GenerateCSV {



	public static void main(String[] args) {

		/* INIT DECLARE */
		//Dates
		Date date = null;

		//Scanners
		Scanner in = new Scanner(System.in);;

		//ints
		int customcolnum = 0;
		int customrownum = 0;
		int randomrowstotal = 0;

		/* END INIT DECLARE */

		//First Operation: Gets the amount of columns that a user wants in their csv file
		boolean opr1 = true;
			while(opr1 == true) {

				//String customdatstr = "NULL"; //Not used yet TODO 
				//float customdatnum = 0; //Not used yet TODO 

				/* How to do Custom Dates */
				SimpleDateFormat format = new SimpleDateFormat("dd/MM/yyyy");
				try {
					date = format.parse("21/09/1995");
				} catch (ParseException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}
				System.out.println(date);
				/* END note: there is native sql in java if that is better */
				//String customdatdate = "00/00/0000"; //No date support in Eclipse

				customcolnum = Integer.parseInt(getInputForInt(in, "Enter How Many Coloumns You Would Like Generated?\n"));
				boolean check = getInputForBoolean(in, "You Have Entered " + customcolnum + " Coloumns, Continue? YES/NO\n");
				

				if (check) {
					System.out.println ("YOU HAVE ENTERED YES");
					opr1 = false;
					//Continue operation
					break;

				}

				else{
					System.out.println ("YOU HAVE ENTERED NO");
					opr1 = true;
					//Restart operation
				}
			}//First Operation While Loop END



		//Second Operation: Gets the amount of rows that the user wants to be generated
		boolean opr2 = true;
			while(opr2 == true) {



				customrownum = Integer.parseInt(getInputForInt(in, "Please Enter The Maximum Amount Of Rows Generated By This Program\n"));	

				boolean check = getInputForBoolean(in, "You Have Entered " + (customrownum) + " Rows, Continue? YES/NO\n");	



				if (check) {
					System.out.println ("YOU HAVE ENTERED YES");
					opr2 = false;
					//Continue operation
					break;
				}

				else{
					System.out.println ("YOU HAVE ENTERED NO");
					opr2 = true;
					//Restart operation
				}
			}//Second Operation While Loop END



		//Third Operation: Displays the total amount of columns and rows that a user wants to input into the program

		boolean opr3 = true;
			while(opr3 == true) {


				boolean check = getInputForBoolean(in, customcolnum + " Colums and " + customrownum +  " rows, CONTINUE YES/NO\n");	

				if (check) {
					System.out.println ("YOU HAVE ENTERED YES");
					customrownum--;
					customcolnum--;
					opr3 = false;
					//Continue operation
					break;

				}

				else{
					System.out.println ("YOU HAVE ENTERED NO");
					opr3 = true;
					//Restarts operation
				}
			}//Third Operation END


		//Sixth Operation: TODO

		ArrayList<String> coldata = new ArrayList<String>();
		ArrayList<ArrayList<String>> rowdata = new ArrayList<ArrayList<String>>();
		int sixoploop = 0;
		int forthoploop = 0;
		for(sixoploop = 0; sixoploop <= customrownum;sixoploop++)
		{
			//Fourth Operation: Gets the user to enter the data for each column in a row

			for(forthoploop = 0; customcolnum >= (forthoploop);forthoploop++){
				System.out.println("Please enter your data for column " + (forthoploop +1) + " In row " + (sixoploop + 1));
				coldata.add (in.nextLine());


			}//Forth Operation END
			ArrayList<String> coldatacopy = new ArrayList<String>();
			coldatacopy = (ArrayList)coldata.clone();
			coldata.clear();
			rowdata.add(coldatacopy);

		}


		//Get how many Generated Rows
		
		Random rnd = new Random();
		randomrowstotal = Integer.parseInt(getInputForInt(in, "Enter How Many Rows You Want Randomly Generated In Total\n"));
		ArrayList<ArrayList<String>> rowdatarnd = new ArrayList<ArrayList<String>>();
		for(int i = 0; i <= randomrowstotal; i++) {

			rowdatarnd.add(rowdata.get(rnd.nextInt(rowdata.size())));
			
		}
		
		
		
		//Fifth Operation: Displays all data entered for the selected row
		System.out.println('\n' + "				" + rowdatarnd.toString());

		
		
		
		
		//Seventh Operation	
		//CSVWriter writer = new CSVWriter(new FileWriter("D://output.csv"));
		//TEST FOR NOW 
		String parserstrng = "null";
		   try {
			   
		        FileWriter myWriter = new FileWriter("GeneratedCSV.csv");
				//for (int i = 0; i <= customcolnum + custom

				
					for(int i2 = 0; i2 <= randomrowstotal; i2++) {
					parserstrng = rowdatarnd.get(i2).toString();
				
			        myWriter.write(parserstrng);
			        myWriter.write(System.getProperty("line.separator"));
			       
				}
				
		        myWriter.close();//replace dosnt work

		        System.out.println("Successfully wrote to the file.");
		      } catch (IOException e) {
		        System.out.println("An error occurred.");
		        e.printStackTrace();
		      }
		   
	

  
			    
		/* End of Program */
		in.close();
		in=null;
		/* End of Program */
	}//Main END
	public static String getInputForInt(Scanner in, String prompt) { // Get valid user input
	    System.out.print(prompt); // Tell user what to input
	    String text = "";
	    while (true) { // Keep looping until valid input is found
	        text = in.nextLine(); // Get input from stdin
	        if(isInteger(text)) // Check if they put in integer
	            break; // Exit loop
	        System.out.print("Try again, " + prompt); // Wasn't valid, prompt again
	    } 
	    return text; // Return valid user input
	}
	
	public static boolean getInputForBoolean(Scanner in, String prompt) { // Get valid user input
	    System.out.print(prompt); // Tell user what to input
	    String text = "";
	    while (true) { // Keep looping until valid input is found
	        text = in.nextLine(); // Get input from stdin
	        switch(text.toLowerCase()) { //check for valid input
	        case "y":
	        	return true;
	        case "n":
	        	return false;
	        case "yes":
	        	return true;
	        case "no":
	        	return false;
	        case "1":
	        	return true;
	        case "0":
	        	return false;
	        case "true":
	        	return true;
	        case "false":
	        	return false;	
	        }
	        System.out.print("Try again, " + prompt);// Wasn't valid, prompt again
	    } 
	}

	private static boolean isInteger(String str) { // Check if string is integer
	    try {
	        Integer.parseInt(str); // If this doesn't fail then it's integer
	        return true;
	    } catch(NumberFormatException e) {
	        return false; // Wasn't integer
	    }
	}

}//Class END




